Plugins for Lenovo CNOS Telemetry
===
Introduction
---
Network telemetry is used by organizations to monitor their network devices (e.g. switches,routers) and provide this data to software controllers to  analyze the data for condition of the network. Network Telemetry Agents running on Lenovo CNOS monitor the buffer statistics and network interface counters on the switch. Extenal Montoring and Analytical tools like Ganglia and Splunk can be used to monitor and analyse the telemetry agent data pulled from switches running Lenovo CNOS. The plugins to do capacity planning and congestion detection are presented here.

Preparation for running the Ganglia plugins
---
**Server Installation**

Install  Ubuntu latest stable release 16.04 on a server machine and do the following

1. mkdir lenovo-ganglia
2. cd lenovo-ganglia
3. mkdir ganglia-src
4. cd ganglia-src
5. wget  https://sourceforge.net/projects/ganglia/files/ganglia-web/3.7.2/ganglia-web-3.7.2.tar.gz
6. wget  https://sourceforge.net/projects/ganglia/files/ganglia%20monitoring%20core/3.7.2/ganglia-3.7.2.tar.gz
7. cd ..
8. copy  install.sh from the ganglia directory of the plugin to this directory
9. Install ganglia and the dependent packages by issuing the following command

sudo ./install.sh install

**Lenovo Switch Configuration**

Execute the following command on the Lenovo switch
1. G8272#config

Enters into the configuration mode

2. G8272(config)#feature telemetry

Enables telemetry feature on the switch
3. G8272(config)#no feature restApi

Disable rest server on the switch
4. G8272(config)#feature restApi http

Enable rest server in http mode on port 8090
5. G8272(config)#exit

Exit from the configuration mode.
  
Copy the contents of the plugin directories into the server

Running the plugins
---
1. Download the files and directories in this plugin to the server.
2. Modify the sample conf.py file  according to the swithches and the corresponding interfaces of the switches.

3. edit the following lines in   /usr/local/etc/gmond.conf
cluster {  name = "Lenovo_data_center"  owner = "Lenovo"  latlong = "unspecified"  url = "unspecified" }

4. sudo gmond

5. sudo gmetad

6. Execute the python script collector.py by issuing the command sudo python collector.py

7. Access the ganglia web URL to visualize the output. The different ganglia metrics generated by collector,py will be displayed.



